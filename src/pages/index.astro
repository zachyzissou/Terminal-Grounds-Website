---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/HeroSection.astro';
---

<BaseLayout 
  title="Bloom - Tactical Extraction 2161"
  description="Enter the Interdiction Exclusion Zone. Seven factions. Territorial warfare. Real-time control. Extract, or it never happened."
  canonical="/"
>
  <!-- ==================== IMMERSIVE HERO SECTION ==================== -->
  <section class="hero-cascade">
    <div class="hero-container">
      <!-- Animated Background Elements -->
      <div class="cascade-field">
        <div class="cascade-grid"></div>
        <div class="cascade-pulse"></div>
      </div>
      
      <!-- Primary Hero Content -->
      <div class="hero-content">
        <div class="hero-badge">
          <span class="bloom-mono">IEZ STATUS: ACTIVE</span>
          <div class="status-indicator"></div>
        </div>
        
        <h1 class="hero-title bloom-display">
          <span class="title-line-1">TACTICAL EXTRACTION</span>
          <span class="title-line-2 text-cascade">2161</span>
          <span class="title-subtitle">Seven factions. One quarantine zone.</span>
        </h1>
        
        <p class="hero-description bloom-body">
          Six months after the Cascade, the Interdiction Exclusion Zone remains under lockdown. 
          Seven factions compete for territorial control of the 200km dead-sky zone. 
          <strong class="text-cascade">Choose your allegiance. Master alien tech. Extract, or it never happened.</strong>
        </p>
        
        <!-- Primary CTA Section -->
        <div class="hero-cta-group">
          <a href="#factions" class="btn-cascade" id="enter-bloom-cta">
            <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
              <path d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"/>
            </svg>
            Enter the IEZ
          </a>
          
          <a href="#story" class="btn-faction text-cascade">
            Learn the Lore
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m9 18 6-6-6-6"/>
            </svg>
          </a>
        </div>
        
        <!-- Status Ticker -->
        <div class="status-ticker">
          <div class="ticker-content bloom-mono">
            <span>TERRITORIAL STATUS: CONTESTED</span>
            <span>•</span>
            <span>EXTRACTION WINDOWS: ACTIVE</span>
            <span>•</span>
            <span>HARVESTERS: DORMANT</span>
          </div>
        </div>
      </div>
      
      <!-- Hero Visual -->
      <div class="hero-visual">
        <img 
          src="/assets/images/renders/hero-main.png" 
          alt="Bloom tactical operatives in post-Cascade environment"
          class="hero-image"
          loading="eager"
        />
        <div class="visual-overlay"></div>
      </div>
    </div>
  </section>

  <!-- ==================== FACTION TERRITORIES SECTION ==================== -->
  <section class="territories-section section-cascade" id="factions">
    <div class="container">
      <div class="section-header">
        <h2 class="bloom-display">Choose Your Faction</h2>
        <p class="bloom-body">
          Seven distinct military organizations compete for control of the IEZ. 
          Each faction brings unique tactical advantages, territorial strategies, and philosophical approaches to post-Cascade survival.
        </p>
      </div>
      
      <!-- Interactive Faction Grid -->
      <div class="faction-grid">
        <!-- Sky Bastion Directorate -->
        <article class="faction-card faction-dir" data-faction="dir">
          <div class="faction-emblem">
            <img src="/assets/images/factions/directorate-emblem-enhanced.png" alt="Directorate emblem" />
          </div>
          <div class="faction-info">
            <h3 class="faction-name bloom-heading">Sky Bastion Directorate</h3>
            <p class="faction-motto bloom-mono">"Order through superior firepower"</p>
            <p class="faction-description bloom-body">
              Institutional authority maintaining discipline through technological supremacy and aerial dominance.
            </p>
            <div class="faction-stats">
              <div class="stat">
                <span class="stat-label">Discipline</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 85%"></div></div>
              </div>
              <div class="stat">
                <span class="stat-label">Tech Level</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 80%"></div></div>
              </div>
            </div>
            <a href="/factions#directorate" class="btn-faction">Learn More</a>
          </div>
        </article>

        <!-- The Seventy-Seven -->
        <article class="faction-card faction-f77" data-faction="f77">
          <div class="faction-emblem">
            <img src="/assets/images/factions/free77-emblem.png" alt="Seventy-Seven emblem" />
          </div>
          <div class="faction-info">
            <h3 class="faction-name bloom-heading">The Seventy-Seven</h3>
            <p class="faction-motto bloom-mono">"Nothing personal. Just business."</p>
            <p class="faction-description bloom-body">
              Professional contractors where everything has a price and every mission has completion parameters.
            </p>
            <div class="faction-stats">
              <div class="stat">
                <span class="stat-label">Efficiency</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 70%"></div></div>
              </div>
              <div class="stat">
                <span class="stat-label">Adaptability</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 75%"></div></div>
              </div>
            </div>
            <a href="/factions#seventy-seven" class="btn-faction">Learn More</a>
          </div>
        </article>

        <!-- Civic Wardens -->
        <article class="faction-card faction-cwd" data-faction="cwd">
          <div class="faction-emblem">
            <img src="/assets/images/factions/TG_Emblem_Var_CivicWardens_00001_.png" alt="Civic Wardens emblem" />
          </div>
          <div class="faction-info">
            <h3 class="faction-name bloom-heading">Civic Wardens</h3>
            <p class="faction-motto bloom-mono">"We stand guard so others may live"</p>
            <p class="faction-description bloom-body">
              Community defense specialists providing mutual aid through civilian protection networks.
            </p>
            <div class="faction-stats">
              <div class="stat">
                <span class="stat-label">Defense</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 90%"></div></div>
              </div>
              <div class="stat">
                <span class="stat-label">Community</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 85%"></div></div>
              </div>
            </div>
            <a href="/factions#civic-wardens" class="btn-faction">Learn More</a>
          </div>
        </article>

        <!-- More factions would continue... -->
        <div class="faction-preview-more">
          <div class="more-factions-card bloom-card">
            <h4 class="bloom-heading">4 More Factions</h4>
            <p class="bloom-body">Nomad Clans, Iron Scavengers, Corporate Hegemony, and Archive Keepers each bring unique territorial strategies.</p>
            <a href="/factions" class="btn-cascade">Explore All Factions</a>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== CASCADE STORY SECTION ==================== -->
  <section class="story-section" id="story">
    <div class="container">
      <div class="story-layout">
        <div class="story-content">
          <div class="story-timeline">
            <div class="timeline-marker active">
              <span class="bloom-mono">2161-06</span>
            </div>
            <div class="timeline-line"></div>
          </div>
          
          <div class="story-narrative">
            <h2 class="bloom-display">The Cascade</h2>
            <p class="story-lead bloom-body">
              Six months ago, a <strong class="text-cascade">Monolith-class excavation</strong> triggered a six-week EMP cascade 
              over a 200-kilometer radius. The Interdiction Exclusion Zone was born.
            </p>
            
            <div class="story-details">
              <div class="story-fact">
                <h4 class="bloom-interface">Dead Sky Zone</h4>
                <p class="bloom-body">No aircraft. No satellites. No escape.</p>
              </div>
              <div class="story-fact">
                <h4 class="bloom-interface">Quarantine Protocol</h4>
                <p class="bloom-body">Nothing enters. Nothing leaves. Until now.</p>
              </div>
              <div class="story-fact">
                <h4 class="bloom-interface">Territorial Wars</h4>
                <p class="bloom-body">Seven factions compete for control and survival.</p>
              </div>
            </div>
            
            <a href="/story" class="btn-cascade">Explore the Lore</a>
          </div>
        </div>
        
        <div class="story-visual">
          <img 
            src="/assets/images/environments/LORE_CleanSciFi_1080p_00001_.png" 
            alt="Post-Cascade environment showing the Interdiction Exclusion Zone"
            class="story-image"
          />
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== TECHNOLOGY TIERS SECTION ==================== -->
  <section class="tech-section section-cascade" id="technology">
    <div class="container">
      <div class="section-header">
        <h2 class="bloom-display">Master Alien Technology</h2>
        <p class="bloom-body">
          Three distinct technology tiers define tactical advantage in the IEZ. 
          From reliable Field Grade to reality-bending Monolith artifacts.
        </p>
      </div>
      
      <div class="tech-tiers">
        <div class="tech-tier bloom-card">
          <div class="tier-marker tier-field">T1</div>
          <h3 class="bloom-heading">Field Grade</h3>
          <p class="bloom-body">
            Conventional military equipment. Reliable, proven, accessible to all factions.
          </p>
          <div class="tech-examples">
            <span class="tech-tag">MK2 Service AR</span>
            <span class="tech-tag">Kestrel SMG</span>
            <span class="tech-tag">Watchman DMR</span>
          </div>
        </div>
        
        <div class="tech-tier bloom-card tier-highlight">
          <div class="tier-marker tier-splice">T2</div>
          <h3 class="bloom-heading">Splice Grade</h3>
          <p class="bloom-body">
            Hybrid alien-human technology. Powerful but unstable, requiring specialized handling.
          </p>
          <div class="tech-examples">
            <span class="tech-tag">Plasma Rail H1</span>
            <span class="tech-tag">Ion Scatter H1</span>
            <span class="tech-tag">Heat Systems</span>
          </div>
        </div>
        
        <div class="tech-tier bloom-card">
          <div class="tier-marker tier-monolith">T3</div>
          <h3 class="bloom-heading">Monolith Grade</h3>
          <p class="bloom-body">
            Pure alien artifacts. Devastating potential with extreme risk and rarity.
          </p>
          <div class="tech-examples">
            <span class="tech-tag">Disruptor Lance A1</span>
            <span class="tech-tag">Graviton Projector</span>
            <span class="tech-tag">Reality Distortion</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== WISHLIST CTA SECTION ==================== -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="bloom-display">Join the Extraction</h2>
        <p class="bloom-body">
          Be among the first to enter the IEZ when Bloom launches. 
          Wishlist now for exclusive faction intel and early access opportunities.
        </p>
        
        <div class="cta-actions">
          <a href="https://store.steampowered.com/app/[STEAM_ID]" class="btn-cascade cta-primary">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 22h20L12 2zM12 6l6 12H6l6-12z"/>
            </svg>
            Wishlist on Steam
          </a>
          
          <a href="#newsletter" class="btn-faction text-cascade">
            Join Intel Network
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m9 18 6-6-6-6"/>
            </svg>
          </a>
        </div>
        
        <!-- Social Proof -->
        <div class="social-proof">
          <p class="bloom-mono">Join [WISHLIST_COUNT] operators already tracking Bloom</p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
/* ==================== HERO SECTION STYLES ==================== */
.hero-cascade {
  min-height: 100vh;
  position: relative;
  background: linear-gradient(180deg, var(--bloom-void) 0%, var(--bloom-shadow) 100%);
  overflow: hidden;
  display: flex;
  align-items: center;
}

.hero-container {
  width: 100%;
  max-width: var(--container-width);
  margin: 0 auto;
  padding: 0 var(--space-lg);
  display: grid;
  grid-template-columns: 1fr 1fr;
  gap: var(--space-3xl);
  align-items: center;
  position: relative;
  z-index: 2;
}

.cascade-field {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  z-index: 1;
}

.cascade-grid {
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background-image: 
    linear-gradient(rgba(0, 217, 255, 0.1) 1px, transparent 1px),
    linear-gradient(90deg, rgba(0, 217, 255, 0.1) 1px, transparent 1px);
  background-size: 60px 60px;
  animation: cascade-drift 20s linear infinite;
}

.cascade-pulse {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 800px;
  height: 800px;
  margin: -400px 0 0 -400px;
  background: radial-gradient(circle, rgba(0, 217, 255, 0.1) 0%, transparent 70%);
  animation: cascade-pulse 4s ease-in-out infinite;
}

@keyframes cascade-drift {
  0% { transform: translate(0, 0); }
  100% { transform: translate(-60px, -60px); }
}

@keyframes cascade-pulse {
  0%, 100% { opacity: 0.3; transform: scale(1); }
  50% { opacity: 0.6; transform: scale(1.1); }
}

.hero-content {
  z-index: 3;
}

.hero-badge {
  display: inline-flex;
  align-items: center;
  gap: var(--space-sm);
  padding: var(--space-sm) var(--space-md);
  background: rgba(0, 217, 255, 0.1);
  border: 1px solid var(--bloom-accent);
  border-radius: 2px;
  margin-bottom: var(--space-lg);
  font-size: 0.875rem;
  color: var(--bloom-accent);
}

.status-indicator {
  width: 8px;
  height: 8px;
  background: var(--bloom-accent);
  border-radius: 50%;
  animation: status-blink 2s ease-in-out infinite;
}

@keyframes status-blink {
  0%, 50% { opacity: 1; }
  51%, 100% { opacity: 0.3; }
}

.hero-title {
  font-size: clamp(2.5rem, 5vw, 4rem);
  margin-bottom: var(--space-lg);
  color: var(--bloom-text-primary);
}

.title-line-1 {
  display: block;
  line-height: 0.9;
}

.title-line-2 {
  display: block;
  font-size: 1.2em;
  line-height: 0.8;
  margin: var(--space-sm) 0;
}

.title-subtitle {
  display: block;
  font-size: 0.4em;
  font-weight: 400;
  text-transform: none;
  color: var(--bloom-text-secondary);
  line-height: 1.4;
  margin-top: var(--space-md);
}

.hero-description {
  font-size: 1.125rem;
  margin-bottom: var(--space-xl);
  max-width: 500px;
}

.hero-cta-group {
  display: flex;
  flex-wrap: wrap;
  gap: var(--space-lg);
  margin-bottom: var(--space-xl);
}

.status-ticker {
  background: rgba(22, 26, 29, 0.8);
  border: 1px solid var(--bloom-interface);
  padding: var(--space-md);
  border-radius: 2px;
  overflow: hidden;
}

.ticker-content {
  display: flex;
  gap: var(--space-lg);
  animation: ticker-scroll 30s linear infinite;
  color: var(--bloom-accent);
  font-size: 0.875rem;
}

@keyframes ticker-scroll {
  0% { transform: translateX(100%); }
  100% { transform: translateX(-100%); }
}

.hero-visual {
  position: relative;
  z-index: 3;
}

.hero-image {
  width: 100%;
  height: auto;
  border-radius: 4px;
  box-shadow: var(--shadow-depth);
}

/* ==================== FACTION SECTION STYLES ==================== */
.territories-section {
  padding: var(--space-3xl) 0;
}

.section-header {
  text-align: center;
  margin-bottom: var(--space-3xl);
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.section-header h2 {
  font-size: 2.5rem;
  margin-bottom: var(--space-lg);
  color: var(--bloom-text-primary);
}

.faction-grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-xl);
}

.faction-card {
  padding: var(--space-xl);
  transition: all var(--anim-normal) var(--anim-tactical);
  cursor: pointer;
}

.faction-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}

.faction-emblem {
  width: 60px;
  height: 60px;
  margin-bottom: var(--space-lg);
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--faction-primary);
  box-shadow: 0 0 20px rgba(var(--faction-primary), 0.3);
}

.faction-emblem img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.faction-name {
  font-size: 1.5rem;
  margin-bottom: var(--space-sm);
}

.faction-motto {
  color: var(--faction-primary);
  font-size: 0.875rem;
  margin-bottom: var(--space-md);
  font-style: italic;
}

.faction-description {
  margin-bottom: var(--space-lg);
  line-height: 1.6;
}

.faction-stats {
  margin-bottom: var(--space-lg);
}

.stat {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
}

.stat-label {
  font-family: var(--font-interface);
  font-size: 0.875rem;
  color: var(--bloom-text-secondary);
  flex: 1;
}

.stat-bar {
  flex: 2;
  height: 4px;
  background: var(--bloom-interface);
  margin-left: var(--space-md);
  border-radius: 2px;
  overflow: hidden;
}

.stat-fill {
  height: 100%;
  background: var(--faction-primary);
  transition: width var(--anim-slow) var(--anim-tactical);
}

/* ==================== RESPONSIVE DESIGN ==================== */
@media (max-width: 1024px) {
  .hero-container {
    grid-template-columns: 1fr;
    text-align: center;
    gap: var(--space-xl);
  }
  
  .hero-content {
    order: 2;
  }
  
  .hero-visual {
    order: 1;
  }
}

@media (max-width: 640px) {
  .hero-cascade {
    min-height: 90vh;
  }
  
  .hero-container {
    padding: 0 var(--space-md);
  }
  
  .hero-cta-group {
    flex-direction: column;
    align-items: center;
  }
  
  .faction-grid {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
// ==================== INTERACTIVE ENHANCEMENTS ====================

// Faction card interactions
document.addEventListener('DOMContentLoaded', () => {
  const factionCards = document.querySelectorAll('.faction-card');
  
  factionCards.forEach(card => {
    card.addEventListener('mouseenter', () => {
      const faction = card.dataset.faction;
      card.style.setProperty('--glow-intensity', '0.6');
    });
    
    card.addEventListener('mouseleave', () => {
      card.style.setProperty('--glow-intensity', '0.2');
    });
  });
  
  // Track CTA interactions
  const enterBloomCTA = document.getElementById('enter-bloom-cta');
  if (enterBloomCTA) {
    enterBloomCTA.addEventListener('click', () => {
      // Analytics tracking would go here
      console.log('User entered the IEZ');
    });
  }
});

// Parallax effects for hero section
if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
  window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const cascadeGrid = document.querySelector('.cascade-grid');
    if (cascadeGrid) {
      cascadeGrid.style.transform = `translate(${scrolled * 0.1}px, ${scrolled * 0.1}px)`;
    }
  });
}
</script>