---
import BaseLayout from '../layouts/BaseLayout.astro';
import HeroSection from '../components/HeroSection.astro';
---

<BaseLayout 
  title="Bloom - Tactical Extraction 2161"
  description="Enter the Interdiction Exclusion Zone. Seven factions. Territorial warfare. Real-time control. Extract, or it never happened."
  canonical="/"
>
  <!-- ==================== IMMERSIVE HERO SECTION ==================== -->
  <HeroSection />

  <!-- ==================== FACTION TERRITORIES SECTION ==================== -->
  <section class="section" id="factions">
    <div class="container">
      <div class="section-header text-center">
        <h2>Choose Your Faction</h2>
        <p>
          Seven distinct military organizations compete for control of the IEZ.
          Each faction brings unique tactical advantages, territorial strategies, and philosophical approaches to post-Cascade survival.
        </p>
      </div>

      <!-- Interactive Faction Grid -->
      <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
        <!-- Sky Bastion Directorate -->
        <article class="card faction-card faction-dir" data-faction="dir">
          <div class="faction-emblem">
            <img src="/assets/images/factions/directorate-emblem-enhanced.png" alt="Directorate emblem" />
          </div>
          <div class="faction-info">
            <h3>Sky Bastion Directorate</h3>
            <p class="bloom-mono">"Order through superior firepower"</p>
            <p>
              Institutional authority maintaining discipline through technological supremacy and aerial dominance.
            </p>
            <div class="faction-stats">
              <div class="stat">
                <span class="stat-label">Discipline</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 85%"></div></div>
              </div>
              <div class="stat">
                <span class="stat-label">Tech Level</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 80%"></div></div>
              </div>
            </div>
            <a href="/factions#directorate" class="btn btn-secondary">Learn More</a>
          </div>
        </article>

        <!-- The Seventy-Seven -->
        <article class="card faction-card faction-f77" data-faction="f77">
          <div class="faction-emblem">
            <img src="/assets/images/factions/free77-emblem.png" alt="Seventy-Seven emblem" />
          </div>
          <div class="faction-info">
            <h3>The Seventy-Seven</h3>
            <p class="bloom-mono">"Nothing personal. Just business."</p>
            <p>
              Professional contractors where everything has a price and every mission has completion parameters.
            </p>
            <div class="faction-stats">
              <div class="stat">
                <span class="stat-label">Efficiency</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 70%"></div></div>
              </div>
              <div class="stat">
                <span class="stat-label">Adaptability</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 75%"></div></div>
              </div>
            </div>
            <a href="/factions#seventy-seven" class="btn btn-secondary">Learn More</a>
          </div>
        </article>

        <!-- Civic Wardens -->
        <article class="card faction-card faction-cwd" data-faction="cwd">
          <div class="faction-emblem">
            <img src="/assets/images/factions/TG_Emblem_Var_CivicWardens_00001_.png" alt="Civic Wardens emblem" />
          </div>
          <div class="faction-info">
            <h3>Civic Wardens</h3>
            <p class="bloom-mono">"We stand guard so others may live"</p>
            <p>
              Community defense specialists providing mutual aid through civilian protection networks.
            </p>
            <div class="faction-stats">
              <div class="stat">
                <span class="stat-label">Defense</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 90%"></div></div>
              </div>
              <div class="stat">
                <span class="stat-label">Community</span>
                <div class="stat-bar"><div class="stat-fill" style="width: 85%"></div></div>
              </div>
            </div>
            <a href="/factions#civic-wardens" class="btn btn-secondary">Learn More</a>
          </div>
        </article>

        <!-- More factions would continue... -->
        <div class="card more-factions-card">
          <h4>4 More Factions</h4>
          <p>Nomad Clans, Iron Scavengers, Corporate Hegemony, and Archive Keepers each bring unique territorial strategies.</p>
          <a href="/factions" class="btn btn-primary">Explore All Factions</a>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== CASCADE STORY SECTION ==================== -->
  <section class="story-section" id="story">
    <div class="container">
      <div class="story-layout">
        <div class="story-content">
          <div class="story-timeline">
            <div class="timeline-marker active">
              <span class="bloom-mono">2161-06</span>
            </div>
            <div class="timeline-line"></div>
          </div>
          
          <div class="story-narrative">
            <h2 class="bloom-display">The Cascade</h2>
            <p class="story-lead bloom-body">
              Six months ago, a <strong class="text-cascade">Monolith-class excavation</strong> triggered a six-week EMP cascade 
              over a 200-kilometer radius. The Interdiction Exclusion Zone was born.
            </p>
            
            <div class="story-details">
              <div class="story-fact">
                <h4 class="bloom-interface">Dead Sky Zone</h4>
                <p class="bloom-body">No aircraft. No satellites. No escape.</p>
              </div>
              <div class="story-fact">
                <h4 class="bloom-interface">Quarantine Protocol</h4>
                <p class="bloom-body">Nothing enters. Nothing leaves. Until now.</p>
              </div>
              <div class="story-fact">
                <h4 class="bloom-interface">Territorial Wars</h4>
                <p class="bloom-body">Seven factions compete for control and survival.</p>
              </div>
            </div>
            
            <a href="/story" class="btn-cascade">Explore the Lore</a>
          </div>
        </div>
        
        <div class="story-visual">
          <img 
            src="/assets/images/environments/LORE_CleanSciFi_1080p_00001_.png" 
            alt="Post-Cascade environment showing the Interdiction Exclusion Zone"
            class="story-image"
          />
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== TECHNOLOGY TIERS SECTION ==================== -->
  <section class="tech-section section-cascade" id="technology">
    <div class="container">
      <div class="section-header">
        <h2 class="bloom-display">Master Alien Technology</h2>
        <p class="bloom-body">
          Three distinct technology tiers define tactical advantage in the IEZ. 
          From reliable Field Grade to reality-bending Monolith artifacts.
        </p>
      </div>
      
      <div class="tech-tiers">
        <div class="tech-tier bloom-card">
          <div class="tier-marker tier-field">T1</div>
          <h3 class="bloom-heading">Field Grade</h3>
          <p class="bloom-body">
            Conventional military equipment. Reliable, proven, accessible to all factions.
          </p>
          <div class="tech-examples">
            <span class="tech-tag">MK2 Service AR</span>
            <span class="tech-tag">Kestrel SMG</span>
            <span class="tech-tag">Watchman DMR</span>
          </div>
        </div>
        
        <div class="tech-tier bloom-card tier-highlight">
          <div class="tier-marker tier-splice">T2</div>
          <h3 class="bloom-heading">Splice Grade</h3>
          <p class="bloom-body">
            Hybrid alien-human technology. Powerful but unstable, requiring specialized handling.
          </p>
          <div class="tech-examples">
            <span class="tech-tag">Plasma Rail H1</span>
            <span class="tech-tag">Ion Scatter H1</span>
            <span class="tech-tag">Heat Systems</span>
          </div>
        </div>
        
        <div class="tech-tier bloom-card">
          <div class="tier-marker tier-monolith">T3</div>
          <h3 class="bloom-heading">Monolith Grade</h3>
          <p class="bloom-body">
            Pure alien artifacts. Devastating potential with extreme risk and rarity.
          </p>
          <div class="tech-examples">
            <span class="tech-tag">Disruptor Lance A1</span>
            <span class="tech-tag">Graviton Projector</span>
            <span class="tech-tag">Reality Distortion</span>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- ==================== WISHLIST CTA SECTION ==================== -->
  <section class="cta-section">
    <div class="container">
      <div class="cta-content">
        <h2 class="bloom-display">Join the Extraction</h2>
        <p class="bloom-body">
          Be among the first to enter the IEZ when Bloom launches. 
          Wishlist now for exclusive faction intel and early access opportunities.
        </p>
        
        <div class="cta-actions">
          <a href="https://store.steampowered.com/app/[STEAM_ID]" class="btn-cascade cta-primary">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
              <path d="M12 2L2 22h20L12 2zM12 6l6 12H6l6-12z"/>
            </svg>
            Wishlist on Steam
          </a>
          
          <a href="#newsletter" class="btn-faction text-cascade">
            Join Intel Network
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="m9 18 6-6-6-6"/>
            </svg>
          </a>
        </div>
        
        <!-- Social Proof -->
        <div class="social-proof">
          <p class="bloom-mono">Join the operators already tracking Bloom</p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>

<style>
/* Hero section styles moved to HeroSection component */

/* ==================== FACTION SECTION STYLES ==================== */
.section {
  padding: var(--space-3xl) 0;
}

.section-header {
  text-align: center;
  margin-bottom: var(--space-3xl);
  max-width: 600px;
  margin-left: auto;
  margin-right: auto;
}

.section-header h2 {
  font-size: 2.5rem;
  margin-bottom: var(--space-lg);
  color: var(--bloom-text-primary);
}

.grid {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
  gap: var(--space-xl);
}

.card {
  padding: var(--space-xl);
  transition: all var(--anim-normal) var(--anim-tactical);
  cursor: pointer;
  border: 1px solid var(--bloom-interface);
  border-radius: 8px;
  background: var(--bloom-background);
  box-shadow: var(--shadow-depth);
}

.card:hover {
  transform: translateY(-4px);
  box-shadow: 0 8px 32px rgba(0, 0, 0, 0.6);
}

.faction-emblem {
  width: 60px;
  height: 60px;
  margin-bottom: var(--space-lg);
  border-radius: 50%;
  overflow: hidden;
  border: 2px solid var(--faction-primary);
  box-shadow: 0 0 20px rgba(var(--faction-primary), 0.3);
}

.faction-emblem img {
  width: 100%;
  height: 100%;
  object-fit: cover;
}

.faction-info {
  text-align: left;
}

.faction-info h3 {
  font-size: 1.5rem;
  margin-bottom: var(--space-sm);
  color: var(--bloom-text-primary);
}

.faction-info p {
  margin-bottom: var(--space-md);
  line-height: 1.6;
  color: var(--bloom-text-secondary);
}

.faction-stats {
  margin-bottom: var(--space-lg);
}

.stat {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: var(--space-sm);
}

.stat-label {
  font-family: var(--font-interface);
  font-size: 0.875rem;
  color: var(--bloom-text-secondary);
  flex: 1;
}

.stat-bar {
  flex: 2;
  height: 4px;
  background: var(--bloom-interface);
  margin-left: var(--space-md);
  border-radius: 2px;
  overflow: hidden;
}

.stat-fill {
  height: 100%;
  background: var(--faction-primary);
  transition: width var(--anim-slow) var(--anim-tactical);
}

/* ==================== RESPONSIVE DESIGN ==================== */
@media (max-width: 1024px) {
  .hero-container {
    grid-template-columns: 1fr;
    text-align: center;
    gap: var(--space-xl);
  }
  
  .hero-content {
    order: 2;
  }
  
  .hero-visual {
    order: 1;
  }
}

@media (max-width: 640px) {
  .hero {
    min-height: 90vh;
  }
  
  .hero-container {
    padding: 0 var(--space-md);
  }
  
  .hero-actions {
    flex-direction: column;
    align-items: center;
  }
  
  .faction-grid {
    grid-template-columns: 1fr;
  }
}
</style>

<script>
// ==================== INTERACTIVE ENHANCEMENTS ====================

// Faction card interactions
document.addEventListener('DOMContentLoaded', () => {
  const factionCards = document.querySelectorAll<HTMLElement>('.faction-card');
  
  factionCards.forEach(card => {
    card.addEventListener('mouseenter', () => {
      const faction = (card as HTMLElement).dataset.faction;
      (card as HTMLElement).style.setProperty('--glow-intensity', '0.6');
    });
    
    card.addEventListener('mouseleave', () => {
      (card as HTMLElement).style.setProperty('--glow-intensity', '0.2');
    });
  });
  
  // Track CTA interactions
  const enterBloomCTA = document.getElementById('enter-bloom-cta');
  if (enterBloomCTA) {
    enterBloomCTA.addEventListener('click', () => {
      // Analytics tracking would go here
      console.log('User entered the IEZ');
    });
  }
});

// Parallax effects for hero section
if (window.matchMedia('(prefers-reduced-motion: no-preference)').matches) {
  window.addEventListener('scroll', () => {
    const scrolled = window.pageYOffset;
    const cascadeGrid = document.querySelector<HTMLElement>('.cascade-grid');
    if (cascadeGrid) {
      cascadeGrid.style.transform = `translate(${scrolled * 0.1}px, ${scrolled * 0.1}px)`;
    }
  });
}
</script>